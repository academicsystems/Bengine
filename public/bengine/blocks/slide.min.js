Bengine.extensibles.slide=new function(){this.type="slide",this.name="slide",this.category="media",this.upload=!0,this.accept=".pdf,.ppt,.pptx,.pps,.ppsx";var t=this,e={files:{},pdfObjects:{},renderPDF:function(t,e,n){t.getPage(e).then(function(t){var e=t.getViewport(.8);n.height=e.height,n.width=e.width;var i={canvasContext:n.getContext("2d"),viewport:e};t.render(i).promise.then(function(){})})},pageTurn:function(t){var n=t.pageX-(window.innerWidth-this.clientWidth)/2,i=this.childNodes[0],a=i.getAttribute("data-page"),r=i.getAttribute("id"),s=e.pdfObjects[r].numPages;n>this.clientWidth/2?a<s&&(a++,i.setAttribute("data-page",a),e.renderPDF(e.pdfObjects[r],a,i)):a>1&&(a--,i.setAttribute("data-page",a),e.renderPDF(e.pdfObjects[r],a,i))}};this.destroy=function(t){var n=t.childNodes[0].getAttribute("data-url");delete e.files[n]},this.fetchDependencies=function(){return[{inner:"",integrity:"",source:"https://mozilla.github.io/pdf.js/build/pdf.js",type:"text/javascript",wait:"pdfjsLib"}]},this.insertContent=function(n,i){var a=document.createElement("canvas");if(a.setAttribute("class","xSli"),a.setAttribute("id",content),a.setAttribute("data-page","1"),a.setAttribute("data-url",null),n.appendChild(a),!t.p.emptyObject(i)&&i.content){var r=i.content,s=t.d.getContentPath()+t.d.getPagePath()+r;t.p.getMediaFile(s,function(t){e.files[r]=new File([t.target.response],r,{type:"application/pdf"});var n={data:t.target.response};pdfjsLib.getDocument(n).then(function(t){e.pdfObjects[i.content]=t,e.renderPDF(t,1,a)})}),a.setAttribute("data-url",r)}return n.onmouseup=e.pageTurn,n},this.afterDOMinsert=function(n,i){if(i){var a=t.d.getContentPath()+t.d.getPagePath()+i,r=document.getElementById(n).childNodes[0];t.p.getMediaFile(a,function(t){e.files[i]=new File([t.target.response],i,{type:"application/pdf"});var n={data:t.target.response};pdfjsLib.getDocument(n).then(function(t){e.pdfObjects[i]=t,r.setAttribute("id",i),e.renderPDF(t,1,r)})}),r.setAttribute("data-url",i)}},this.runBlock=null,this.runData=null,this.saveContent=function(t){return{content:document.getElementById(t).children[0].id.replace(location.href.substring(0,location.href.lastIndexOf("/")+1),"")}},this.saveFile=function(t){return e.files[document.getElementById(t).children[0].getAttribute("data-url")]},this.showContent=function(n,i){var a=document.createElement("canvas");if(a.setAttribute("class","xSli-show"),a.setAttribute("id",i.content),a.setAttribute("data-page","1"),n.appendChild(a),""!==i){var r=t.d.getContentPath()+t.d.getPagePath()+i.content;pdfjsLib.getDocument(r).then(function(t){e.pdfObjects[i.content]=t,e.renderPDF(t,1,a)})}return n.onmouseup=e.pageTurn,n},this.styleBlock=function(){return".xSli, .xSli-show {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tborder: 1px solid black;\n\t\t\tborder-radius: 2px;\n\n\t\t\tpadding: 0px;\n\t\t\tmargin: 0px;\n\t\t\tbox-sizing: border-box;\n\t\t}"}};