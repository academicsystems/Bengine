Bengine.extensibles.audio=new function(){this.type="audio",this.name="audio",this.category="media",this.upload=!0,this.accept=".aac,.aiff,.m4a,.mp3,.ogg,.ra,.wav,.wma";var t=this,e={files:{},objectURLs:{}};this.destroy=function(t){var n=t.childNodes[0].getAttribute("data-url");delete e.files[n],URL.revokeObjectURL(e.objectURLs[n])},this.fetchDependencies=function(){return null},this.insertContent=function(n,i){var a=document.createElement("audio");a.setAttribute("class","xAud"),a.volume=.8,a.setAttribute("controls","controls"),a.setAttribute("data-url",null);var o=document.createElement("source");if(o.setAttribute("type","audio/mpeg"),i.content){var r=i.content,s=t.d.getContentPath()+t.d.getPagePath()+r;t.p.getMediaFile(s,function(t){e.files[r]=new File([t.target.response],r,{type:"audio/mpeg"}),o.src=e.objectURLs[r]=URL.createObjectURL(new Blob([t.target.response],{type:"audio/mpeg"})),a.load()}),a.setAttribute("data-url",r)}return a.appendChild(o),n.appendChild(a),n},this.afterDOMinsert=function(n,i){if(i){var a=t.d.getContentPath()+t.d.getPagePath()+i,o=document.getElementById(n).childNodes[0];t.p.getMediaFile(a,function(t){e.files[i]=new File([t.target.response],i,{type:"audio/mpeg"}),o.childNodes[0].src=e.objectURLs[i]=URL.createObjectURL(new Blob([t.target.response],{type:"audio/mpeg"})),o.load()}),o.setAttribute("data-url",i)}},this.runBlock=null,this.runData=null,this.saveContent=function(t){return{content:document.getElementById(t).children[0].getAttribute("data-url").replace(location.href.substring(0,location.href.lastIndexOf("/")+1),"")}},this.saveFile=function(t){return e.files[document.getElementById(t).children[0].getAttribute("data-url")]},this.showContent=function(e,n){var i=document.createElement("audio");i.setAttribute("class","xAud-show"),i.volume=.8,i.setAttribute("controls","controls");var a=t.d.getContentPath()+t.d.getPagePath()+n.content,o=document.createElement("source");return o.setAttribute("src",a),o.setAttribute("type","audio/mpeg"),i.appendChild(o),e.appendChild(i),e},this.styleBlock=function(){return".xAud, .xAud-show {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 100%;\n\n\t\t\tpadding: 0px;\n\t\t\tmargin: 0px;\n\t\t\tbox-sizing: border-box;\n\t\t}"}};